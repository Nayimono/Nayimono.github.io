<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>대한민국 개인정보 유출 데이터보드</title>
  <link rel="stylesheet" href="assets/databoard.css" />
  <!-- https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js
  https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js -->
</head>
<body>
  <main class="container">
    <h1>대한민국 개인정보 유출 데이터보드</h1>
    <section class="kpi-grid">
      <div class="card kpi"><h3>MAX 위험점수</h3><div id="gaugeRisk" class="chart"></div><div class="sub"><span id="topCase">-</span></div></div>
      <div class="card kpi"><h3>전체 사건</h3><div class="big" id="totalIncidents">0</div><div class="sub">(기간: <span id="period">-</span>)</div></div>
      <div class="card kpi"><h3>노출 레코드 합계</h3><div class="big" id="totalRecords">0</div><div class="sub">평균/사건: <span id="avgRecords">0</span></div></div>
      <div class="card kpi"><h3>상위 유출 원인</h3><div class="big" id="topMethod">-</div><div class="sub">(점유율: <span id="topMethodPct">-</span>)</div></div>
    </section>

    <section class="grid">
      <div class="card"><h3>유형별 비율</h3><div id="byMethod" class="chart"></div></div>
      <div class="card"><h3>월별 추이</h3><div id="trend" class="chart"></div></div>
      <div class="card"><h3>사건 분포(버블)</h3><div id="scatter" class="chart"></div></div>
      <div class="card"><h3>부문별 TOP 10</h3><div id="topSector" class="chart"></div></div>
    </section>

    <section class="card"><h3>대한민국 2024 개인정보 유출 신고 요약</h3>
      <div id="krSummary"></div>
      <small>출처: 개인정보보호위원회·KISA 「2024년 개인정보 유출 신고 동향 및 예방 방법」(2025‑03‑20)</small>
    </section>

    <!-- 에러 박스(문제 시 안내) -->
    <div id="errorBox" style="display:none;color:#b00;background:#fee;border:1px solid #fbb;padding:10px;margin-top:12px;border-radius:8px"></div>
  </main>

  <script>
    // 상대경로 + KR 필터
    const DATA_URL = 'data/breaches-kr.csv';
    const COUNTRY_ONLY = 'KR';
    window.KR_2024_SUMMARY = { total:307, cause:{hacking:56, error:30, system:7}, publicShare:34 };

    // 간단 오류 표시
    window.addEventListener('error', (e)=>{
      const box = document.getElementById('errorBox');
      box.style.display='block';
      box.textContent = '스크립트 오류: ' + (e.message || e.error);
    });
  </script>
  <script src="assets/databoard.js"></script>
</body>
</html>